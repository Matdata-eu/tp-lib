# ============================================================================
# Test Dockerfile - Runs all tests including CRS transformation tests
# ============================================================================
FROM rust:1.91-bookworm

# Set working directory
WORKDIR /workspace

# Copy workspace files
COPY . .

# Default command: Run all tests
CMD ["cargo", "test", "--workspace", "--exclude", "tp-py", "--", "--nocapture"]

# ============================================================================
# Usage instructions:
#
# 1. Build the test image:
#    docker build -f Dockerfile.test -t tp-lib-test .
#
# 2. Run all tests:
#    docker run --rm tp-lib-test
#
# 3. Run specific test:
#    docker run --rm tp-lib-test cargo test test_name
#
# 4. Run with verbose output:
#    docker run --rm tp-lib-test cargo test -- --nocapture --test-threads=1
#
# 5. Run only CRS transformation tests:
#    docker run --rm tp-lib-test cargo test crs_transform
#
# 6. Interactive shell for debugging:
#    docker run --rm -it tp-lib-test bash
#
# 7. Using docker-compose:
#    docker-compose run --rm test
# ============================================================================
#    docker-compose run --rm test
# ============================================================================
